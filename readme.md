# HTTP TCP Server

#### Для работы поиска фильмов необходимо предоставить свой API ключ в переменную OMDB_API_KEY

Язык программирования: Python
Максимальный балл: 10
Цель работы: Освоить создание многопоточных TCP-серверов на низком уровне с обработкой HTTP-запросов.
Задание
Часть 1: Создание базового TCP-сервера (4 балла)
Реализуйте многопоточный TCP-сервер, который:
Создает сокет и привязывает его к localhost порту 8888
Обрабатывает подключения в отдельных потоках (модуль threading)
Принимает HTTP-запросы от клиентов и выводит их в консоль для отладки
Минимальная структура сервера:
```python
import socket
import threading
def handle_client(client_socket): # Получить HTTP-запрос # Вывести его в консоль # Отправить простой HTTP-ответ
pass

# Основная логика сервера
```
Часть 2: Парсинг HTTP-запросов (3 балла)
Реализуйте функцию парсинга HTTP-запросов, которая извлекает:
Метод запроса (GET/POST)
Путь запроса (URL)
Параметры запроса (query parameters)
Пример запроса для парсинга:
text
GET /weather?city=Москва HTTP/1.1
Host: localhost:8888
User-Agent: Mozilla/5.0
Часть 3: Реализация сервисов (3 балла)
Реализуйте как минимум 2 сервиса на выбор:
Варианты сервисов:
Прогноз погоды — /weather?city=Город
Расписание занятий — /schedule?day=понедельник
Информация о товаре — /product?id=123
Курсы валют — /exchange?currency=USD
Информация о фильме — /movie?title=Название
Требования к сервисам:
Возвращают валидный HTTP-ответ с HTML-страницей
Обрабатывают параметры запроса
Возвращают осмысленный контент (можно заглушки)
Пример реализации сервиса
python
def handle_weather_request(params):
city = params.get('city', ['Неизвестно'])[0] # Заглушка - в реальности здесь API погоды
weather_data = {
'Москва': '+20°C, солнечно',
'Санкт-Петербург': '+15°C, дождь',
'Новосибирск': ' -5°C, снег'
}
forecast = weather_data.get(city, 'Город не найден')
html_response = f"""
<html>
<body>
<h1>Погода в {city}</h1>
<p>{forecast}</p>
<a href="/">На главную</a>
</body>
</html>
"""
return html_response
Критерии оценки
Отлично (8-10 баллов):
✅ Многопоточность реализована корректно
✅ HTTP-парсинг работает для разных запросов
✅ 2+ сервиса с осмысленной логикой
✅ Чистый, комментированный код
✅ Корректная обработка ошибок
Хорошо (6-7 баллов):
✅ Основная функциональность работает
✅ 2 сервиса реализованы
Незначительные ошибки в парсинге/потоках
✅ Код читаем
Удовлетворительно (50-69 баллов):
Сервер работает, но с ограничениями
1 сервис реализован
Проблемы с многопоточностью или парсингом
Неудовлетворительно (0-4 балла):
❌ Сервер не запускается
❌ Критические ошибки
❌ Основные требования не выполнены
Требования к коду
Комментарии — объясните ключевые моменты реализации
Обработка ошибок — try/except для сетевых операций
Чистота кода — понятные названия переменных и функций
Корректное завершение — закрытие сокетов и потоков
Что должно быть в итоге:
TCP-сервер на порту 8888
Многопоточная обработка клиентов
Парсинг HTTP-запросов
2 рабочих сервиса с HTML-ответами
Возможность тестирования через браузер
